{% extends 'app1/base.html' %}
{% block body %}
    {% load static %}

    <style>
        .hide{
			display: none;
    	}
        input:read-only {
            background-color: rgba(0,0,0,.4) !important;
            color: #fff;
        }
    </style>
    <!-- <script>
        $(':input[readonly]').css({'background-color':'rgba(0,0,0,.4)'});
    </script> -->

    <div class="page-content">
        <div class="card radius-15">
            <div class="card-body">
                <div class="card-title">
                    <center><h3 class="mb-0">NEW RECURRING BILL</h3></center>
                </div>
                <hr/>
            </div>
        </div>
        <div class="card radius-15" style="background-color: #243e54;">
            <div class="card-body">
                <form action="{% url 'createrecurringbill' %}" method="post" enctype="multipart/form-data" autocomplete="off">
                    {% csrf_token %}
                     <div class="card-title">
                      <h4 class="mb-0">Vendor Details</h4>
                </div>
                <hr/>
                <!-- <form action="" method="post" enctype="multipart/form-data" autocomplete="off">
                    {% csrf_token %}
                    
                    {% if user.is_authenticated %} -->

                        <div class="row">
                            <div class="col-md-4 mt-2">
                                <label for="validationCustom01">Select Vendor</label>
                                <div class="d-flex">
                                    <select name="vendor_name" id="vendor" class="custom-select">
                                        <option selected disabled>Select Vendor</option>
                                        {% for v in vndr %}
                                        <option value="{{v.vendorid}} {{ v.firstname }} {{ v.lastname }}">{{ v.title }} {{ v.firstname }} {{ v.lastname }}</option>
                                        {% endfor %}
                                    </select>
                                    <a>
                                        <button type="button" class="btn btn-outline-secondary ml-1" 
                                        data-target="#newvendor" data-toggle="modal">+</button>
                                    </a>
                                    <div class="valid-feedback">Looks good!</div> 
                                </div>
                            </div>
                        </div>
                       
                        <div class="row d-none" id="email_row">
                            <div class="col-md-3 mt-2">
                              <label for="email_inp">Vendor Email</label>
                              <input type="text" class="form-control" id="email_inp" name="email_inp">
                            </div>
                          </div>
                    
                          <div class="row d-none" id="gst_trt_row">
                            <div class="col-md-3  mt-2">
                              <label for="gst_trt_inp">GST Treatment</label>
                              <input type="text" class="form-control" id="gst_trt_inp" name="gst_trt_inp">
                            </div>
                          </div>
                    
                          <div class="row d-none" id="gstin_row">
                            <div class="col-md-3  mt-2">
                            <label for="gstin_inp">GST Number</label>
                             <input type="text" class="form-control"  id="gstin_inp" name="gstin_inp">
                            </div>
                          </div>
                          <hr>
                          <br><br>
                          <div class="row">
                              <div class="col-md-3 mt-2"><h5>Bill Details</h5></div>
                              <div class="col-md-3 mt-2"></div>
                              <!-- <div class="col-md-3 mt-2">
                                  <label>Bill Number</label>
                                  <div class="d-flex">
                                      <input name="" type="number" class="form-control" placeholder="1000">
                                      <a class="form-control" data-target="#porderno" data-toggle="modal" style="width: 60px; cursor: pointer;"><center><i class="fa fa-gear"></i></center></i></a>
                                  </div>
                              </div> -->
                          </div>
                          <hr>
                          <div class="row">
                              <div class="col-md-3 mt-2">
                                  <label for="">Source of Supply</label>
                                  <select name="sourceofsupply" id="plosu" class="form-control" onchange="state(this)">
                                      <option value="{{ cmp1.state }}" selected>{{ cmp1.state }}</option>
                                      <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                                      <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                                      <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                                      <option value="[AS] Assam">[AS] Assam</option>
                                      <option value="[BR] Bihar">[BR] Bihar</option>
                                      <option value="[CH] Chandigarh">[CH] Chandigarh</option> Haveli</option>
                                      <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                                      <option value="[DL] Delhi">[DL] Delhi</option>
                                      <option value="[GA] Goa">[GA] Goa</option>
                                      <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                                      <option value="[HR] Haryana">[HR] Haryana</option>
                                      <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                                      <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                                      <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                                      <option value="[KA] Karnataka">[KA] Karnataka</option>
                                      <option value="Kerala">[KL] Kerala</option>
                                      <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                                      <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar
                                      <option value="[LA] Ladakh">[LA] Ladakh</option>
                                      <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                                      <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                                      <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                                      <option value="[MN] Manipur">[MN] Manipur</option>
                                      <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                                      <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                                      <option value="[NL] Nagaland">[NL] Nagaland</option>
                                      <option value="[OD] Odisha">[OD] Odisha</option>
                                      <option value="[PY] Puducherry">[PY] Puducherry</option>
                                      <option value="[PB] Punjab">[PB] Punjab</option>
                                      <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                                      <option value="[SK] Sikkim">[SK] Sikkim</option>
                                      <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                                      <option value="[TS] Telangana">[TS] Telangana</option>
                                      <option value="[TR] Tripura">[TR] Tripura</option>
                                      <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                                      <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                                      <option value="[WB] West Bengal">[WB] West Bengal</option>
                                      <option value="[OT] Other Territory">[OT] Other Territory</option>
                                  </select>
                              </div>
      
                              <div class="col-md-3 mt-2">
                                  <label for="">Bill No.</label>
                                  <input type="text" class="form-control" id="" name="branch" placeholder="BL1000">
                              </div>
                              <div class="col-md-3 mt-2">
                                  <label for="">Profile Name </label>
                                  <input type="text" class="form-control" id="" name="profile_name" placeholder="">   
                              </div>
                              <div class="col-md-3 mt-2">
                                
                                <label for="">Repeat Every</label>
                                <div class="d-flex">
                                    <select class="form-control" name="repeat_every" id="repeat">
                        
                                        <option selected value="1 Week">Week</option>
                                        <option value="2 Weeks">2 Weeks</option>
                                        <option value="1 Month">Month</option>
                                        <option value="2 Months">2 Months</option>
                                        <option value="3 Months">3 Months</option>
                                        <option value="6 Months">6 Months</option>
                                        <option value="1 Year">Years</option>
                                        <option value="2 Years">2 Years</option>
                                        <option value="3 Years">3 Years</option>
                                        <option value="6 Years">6 Years</option>
                                        {% for r in re %}
                                            <option value="{{ r.repeat}}">{{ r.repeat}}</option>
                                        {% endfor %}
                                    </select>
                                    <a>
                                        <button type="button" class="btn btn-outline-secondary ml-1" 
                                        data-target="#newrepeat" data-toggle="modal">+</button>
                                    </a>
                              
                                </div>
                            </div>
                        </div>
                          <hr>
                          
                        <div class="notices mt-3">
                            <div class="text-muted">NOTICE:</div>
                            <div class="text-muted">
                              Fin sYs Terms and Conditions Apply
                            </div>
                          </div>
                          <footer class="text-muted">Purchase was created on a computer and is valid without the
                            signature and seal.
                        </footer>
                        <div class="row mt-3">
                            <div class="col">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                    <label>Agree to terms and conditions</label>
                                    <div class="invalid-feedback">You must agree before submitting.</div>
                                </div>
                            </div>
                        </div> 
                        <div class="row">
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                                <button class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3"
                                        type="submit">
                                    Save as Draft
                                </button>
                            </div>
                            <div class="col-md-4"></div>
                        </div>
                    {% endif %}
                </form>

          

                <!-- <div class="modal fade" id="newvendor">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content" style="background-color: #213b52;">
                            <div class="modal-header">
                                <h3 class="m-3">New Vendor</h3>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="card p-3 m-3">
                                    <form action="createvendor_rbill" method="post" class="needs-validation" novalidate autocomplete="off">
                                        {% csrf_token %}
                                        {% if user.is_authenticated %}
                                            <div class="row">
                                                <div class="col-md-3 mt-2">
                                                    <label for="validationCustom01">Title</label>
                                                    <select name="title" id="title" class="form-control">
                                                        <option value="Mr">Mr</option>
                                                        <option value="Mrs">Mrs</option>
                                                        <option value="Miss">Miss</option>
                                                        <option value="Ms">Ms</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-3 mt-2">
                                                    <label for="validationCustom02">First name</label>
                                                    <input type="text" class="form-control" id="validationCustom02" name="firstname"
                                                           required>
                                                    <div class="valid-feedback">Looks good!</div>
                                                </div>
                                                <div class="col-md-3 mt-2">
                                                    <label for="validationCustom02">Last name</label>
                                                    <input type="text" class="form-control" id="validationCustom02" name="lastname">
                                                </div>
                                                <div class="col-md-3 mt-2">
                                                    <label for="validationCustom03">Company</label>
                                                    <input type="text" class="form-control" id="validationCustom03" name="company_name">
                                                </div>
                                            </div>
                                            
                                            <div class="row">
                                                <div class="col-md-4 mt-3">
                                                    <label for="validationCustom03">Email</label>
                                                    <input type="email" class="form-control" id="validationCustom03" name="email"
                                                        placeholder="finsys@mail.com">
                                                </div>
                                                <div class="col-md-4 mt-3">
                                                    <label for="validationCustom03">Website</label>
                                                    <input type="text" class="form-control" id="validationCustom03"
                                                        placeholder="www.finsys.com" name="website">
                                                </div>
                                                <div class="col-md-4 mt-3">
                                                    <label for="validationCustom01">Mobile</label>
                                                    <input type="text" class="form-control" id="validationCustom01"
                                                        placeholder="Mobile number" maxlength="10"
                                                        name="mobile">
                                                </div>
                                            </div>
                                            <hr>
                                            <center><h4><b>Other Options</b></h4></center>
                                            <hr>
                                            <div class="row">
                                                <div class="col-md-4 mt-3">
                                                    <label for="validationCustom04">GST Treatment</label>
                                                    <select class="form-control" id="gsttyp" name="gsttype" onchange="showgsttyp()"
                                                        onclick="hidinput('hello', this)" required>
                                                        <option selected disabled value="">Choose..</option>
                                                        <option value="Registered Business - Regular">Registered Business - Regular <span><i>(Business that is registered under gst)</i></span></option>
                                                        <option value="Registered Business - Composition">Registered Business - Composition (Business that is registered under composition scheme in gst)</option>
                                                        <option value="unregistered Business">Unregistered Business (Business that has not been registered under gst)</option>
                                                        <option value="Overseas">Overseas (Import/Export of supply outside india)</option>
                                                        <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ) (Business that is located in a special economic zone of india or a SEZ developer)</option>
                                                        <option value="Demed Exports">Demed Exports (Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</option>
                                                        <option value="Tax Deductor">Tax Deductor (State of central gov,government agencies or local authority)</option>
                                                        <option value="SEZ Developer">SEZ Developer (A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</option>
                                                    </select>
                                                </div>
                                                  
                                                <div class="col-md-4 mt-3">
                                                    <div id="hello">
                                                        <label for="validationCustom05">GSTIN</label>
                                                        <input type="text" class="form-control" onchange="checkgst(this)"
                                                            id="validationCustom05" name="gstin"
                                                            placeholder="29APPCK7465F1Z1">
                                                        <a href="https://services.gst.gov.in/services/searchtp"
                                                            target="_blank" style="color:#3dd5f3">Get Taxpayer details ?</a>
                                                        <div class="text-danger m-2" id="warngst"></div>
                                                    </div>
                                                </div>
                                      
                                                <div class="col-md-4 mt-3">
                                                    <label for="validationCustom03">PAN NO</label>
                                                    <input type="text" class="form-control" id="" name="panno"
                                                    placeholder="APPCK7465F">
                                                </div>
                    
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3 mt-2">
                                                   <label for="">Place of Supply</label>
                                                    <select class="form-control" id="" name="sourceofsupply">
                                                        <option value="Nill"></option>
                                                        <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                                                        <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                                                        <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                                                        <option value="[AS] Assam">[AS] Assam</option>
                                                        <option value="[BR] Bihar">[BR] Bihar</option>
                                                        <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                                                        <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                                                        <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                                                        <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                                                        <option value="[DL] Delhi">[DL] Delhi</option>
                                                        <option value="[GA] Goa">[GA] Goa</option>
                                                        <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                                                        <option value="[HR] Haryana">[HR] Haryana</option>
                                                        <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                                                        <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                                                        <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                                                        <option value="[KA] Karnataka">[KA] Karnataka</option>
                                                        <option value="[KL] Kerala">[KL] Kerala</option>
                                                        <option value="[LA] Ladakh">[LA] Ladakh</option>
                                                        <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                                                        <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                                                        <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                                                        <option value="[MN] Manipur">[MN] Manipur</option>
                                                        <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                                                        <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                                                        <option value="[NL] Nagaland">[NL] Nagaland</option>
                                                        <option value="[OD] Odisha">[OD] Odisha</option>
                                                        <option value="[PY] Puducherry">[PY] Puducherry</option>
                                                        <option value="[PB] Punjab">[PB] Punjab</option>
                                                        <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                                                        <option value="[SK] Sikkim">[SK] Sikkim</option>
                                                        <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                                                        <option value="[TS] Telangana">[TS] Telangana</option>
                                                        <option value="[TR] Tripura">[TR] Tripura</option>
                                                        <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                                                        <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                                                        <option value="[WB] West Bengal">[WB] West Bengal</option>
                                                        <option value="[OT] Other Territory">[OT] Other Territory</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="col-md-3 mt-2">
                                                    <label for="">Currency</label>
                                                    <div class="d-flex">
                                                        <input type="text" class="form-control" id="" name="currency" placeholder="INR - Indian Rupee"
                                                            id="">
                                                        <a href="#">
                                                            <button type="button" class="btn btn-outline-secondary ml-1">+</button>
                                                        </a> 
                                                    </div>   
                                                </div>
                                                
                                                <div class="col-md-3 mt-2">
                                                   <label for="">Opening Balance</label>
                                                   <div class="d-flex">
                                                    <p class="form-control" style="width: 60px;">INR</p>
                                                    <input type="number" class="form-control" name="openingbalance" placeholder="INR">
                                                   </div>
                                                </div>
                                                <div class="col-md-3 mt-2">
                                                   <label for="">Payment Terms</label>
                                                   <div class="d-flex">
                                                    <select class="form-control" name="paymentterms">
                                                        <option selected id="trmopt"></option>
                                                        <option value="0">Due on Receipt</option>
                                                        <option value="15">NET 15</option>
                                                        <option value="30">NET 30</option>
                                                        <option value="60">NET 60</option>
                                                        {% for pd in cpd %}
                                                            <option value="{{ pd.newperiod }}">NET {{ pd.newperiod }}</option>
                                                        {% endfor %}
                                                    </select>
                                                    <a class="btn btn-outline-secondary ml-1" data-target="#crperiod" data-toggle="modal">+</a>
                                                </div> 
                                                </div>
                                                <div class="row" style="display: none;">
                                                    <div class="col-md-3 mt-2" >
                                                        <label for="">Date</label>
                                                        <input type="date" id="date2" class="form-control" name="date">
                                                    </div>
                                                </div>
                                            </div>
                                            <hr>
                                            <div class="row">
                                                <div class="col-md-6 mt-5">
                                                    <div class="row">
                                                        <div class="col-md-12 card-title">
                                                            <h5 class="mb-0">Billing Address</h5>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12 mt-3">
                                                            <div class="form-row">
                                                                <label for="street">Street</label>
                                                                <textarea class="form-control street" id="street" name="street"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 mt-3">
                                                            <div class="form-row">
                                                                <label for="city">City</label>
                                                                <input type="text" class="form-control" id="city"
                                                                    name="city"
                                                                    placeholder="City">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 mt-3">
                                                            <div class="form-row">
                                                                <label for="state">State</label>
                                                                <select type="text" class="form-control" id="state" name="state">
                                                                    <option value="" selected>Choose</option>
                                                                    <option value="None Of This">None Of This</option>
                                                                    <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                                                    </option>
                                                                    <option value="Andhra Predhesh">Andhra Predhesh</option>
                                                                    <option value="Arunachal Predesh">Arunachal Predesh</option>
                                                                    <option value="Assam">Assam</option>
                                                                    <option value="Bihar">Bihar</option>
                                                                    <option value="Chandigarh">Chandigarh</option>
                                                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                                                    <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                                                    <option value="Damn anad Diu">Damn anad Diu</option>
                                                                    <option value="Delhi">Delhi</option>
                                                                    <option value="Goa">Goa</option>
                                                                    <option value="Gujarat">Gujarat</option>
                                                                    <option value="Haryana">Haryana</option>
                                                                    <option value="Himachal Predesh">Himachal Predesh</option>
                                                                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                                    <option value="Jharkhand">Jharkhand</option>
                                                                    <option value="Karnataka">Karnataka</option>
                                                                    <option value="Kerala">Kerala</option>
                                                                    <option value="Ladakh">Ladakh</option>
                                                                    <option value="Lakshadweep">Lakshadweep</option>
                                                                    <option value="Madhya Predesh">Madhya Predesh</option>
                                                                    <option value="Maharashtra">Maharashtra</option>
                                                                    <option value="Manipur">Manipur</option>
                                                                    <option value="Meghalaya">Meghalaya</option>
                                                                    <option value="Mizoram">Mizoram</option>
                                                                    <option value="Nagaland">Nagaland</option>
                                                                    <option value="Odisha">Odisha</option>
                                                                    <option value="Puducherry">Puducherry</option>
                                                                    <option value="Punjab">Punjab</option>
                                                                    <option value="Rajasthan">Rajasthan</option>
                                                                    <option value="Sikkim">Sikkim</option>
                                                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                                                    <option value="Telangana">Telangana</option>
                                                                    <option value="Tripura">Tripura</option>
                                                                    <option value="Uttar Predesh">Uttar Predesh</option>
                                                                    <option value="Uttarakhand">Uttarakhand</option>
                                                                    <option value="West Bengal">West Bengal</option>
                                                                    <option value="Other Territory">Other Territory</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 mt-3">
                                                            <div class="form-row">
                                                                <label for="pinco">Pin Code</label>
                                                                <input type="text" class="form-control" id="pinco"
                                                                    name="pincode" maxlength="6"
                                                                    placeholder="PIN Code">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 mt-3">
                                                            <div class="form-row">
                                                                <label for="country">Country</label>
                                                                <input type="text" class="form-control" id="country"
                                                                    name="country"
                                                                    placeholder="Country">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 mt-5">
                                                    <div class="row">
                                                        <div class="col-md-12 d-flex">
                                                            <h5>Shipping Address</h5>
                                                            <input class="ml-4 mt-2 ml-2" type="checkbox" onclick="poppins()" id="okay"
                                                                   name="okay">
                                                            <label class="ml-2 mt-1 ml-2" for="okay">Same As Billing Address</label>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12 mt-3">
                                                            <div class="form-row">
                                                                <label for="shipstreet">Street</label>
                                                                <textarea class="form-control" id="shipstreet"
                                                                    name="shipstreet"
                                                                    ></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 mt-3">
                                                            <div class="form-row">
                                                                <label for="shipcity">City</label>
                                                                <input type="text" class="form-control" id="shipcity"
                                                                    name="shipcity" placeholder="City">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 mt-3">
                                                            <div class="form-row">
                                                                <label for="shipstate">State</label>
                                                                <select type="text" class="form-control" id="plosu" name="shipstate">
                                                                    <option id="shipst" selected>Choose</option>
                                                                    <option value="None Of This">None Of This</option>
                                                                    <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                                                    </option>
                                                                    <option value="Andhra Predhesh">Andhra Predhesh</option>
                                                                    <option value="Arunachal Predesh">Arunachal Predesh</option>
                                                                    <option value="Assam">Assam</option>
                                                                    <option value="Bihar">Bihar</option>
                                                                    <option value="Chandigarh">Chandigarh</option>
                                                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                                                    <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                                                    <option value="Damn anad Diu">Damn anad Diu</option>
                                                                    <option value="Delhi">Delhi</option>
                                                                    <option value="Goa">Goa</option>
                                                                    <option value="Gujarat">Gujarat</option>
                                                                    <option value="Haryana">Haryana</option>
                                                                    <option value="Himachal Predesh">Himachal Predesh</option>
                                                                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                                    <option value="Jharkhand">Jharkhand</option>
                                                                    <option value="Karnataka">Karnataka</option>
                                                                    <option value="Kerala">Kerala</option>
                                                                    <option value="Ladakh">Ladakh</option>
                                                                    <option value="Lakshadweep">Lakshadweep</option>
                                                                    <option value="Madhya Predesh">Madhya Predesh</option>
                                                                    <option value="Maharashtra">Maharashtra</option>
                                                                    <option value="Manipur">Manipur</option>
                                                                    <option value="Meghalaya">Meghalaya</option>
                                                                    <option value="Mizoram">Mizoram</option>
                                                                    <option value="Nagaland">Nagaland</option>
                                                                    <option value="Odisha">Odisha</option>
                                                                    <option value="Puducherry">Puducherry</option>
                                                                    <option value="Punjab">Punjab</option>
                                                                    <option value="Rajasthan">Rajasthan</option>
                                                                    <option value="Sikkim">Sikkim</option>
                                                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                                                    <option value="Telangana">Telangana</option>
                                                                    <option value="Tripura">Tripura</option>
                                                                    <option value="Uttar Predesh">Uttar Predesh</option>
                                                                    <option value="Uttarakhand">Uttarakhand</option>
                                                                    <option value="West Bengal">West Bengal</option>
                                                                    <option value="Other Territory">Other Territory</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 mt-3">
                                                            <div class="form-row">
                                                                <label for="shippinco">Pin Code</label>
                                                                <input type="text" class="form-control" id="shippinco"
                                                                    name="shippincode"
                                                                    placeholder="PIN Code">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 mt-3">
                                                            <div class="form-row">
                                                                <label for="shipcountry">Country</label>
                                                                <input type="text" class="form-control" id="shipcountry"
                                                                    name="shipcountry"
                                                                    placeholder="Country">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-3">
                                                <div class="col">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                                        <label>Agree to terms and conditions</label>
                                                        <div class="invalid-feedback">You must agree before submitting.</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-4"></div>
                                                <div class="col-md-4">
                                                    <button class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3"
                                                            type="submit">
                                                        Submit form
                                                    </button>
                                                </div>
                                                <div class="col-md-4"></div>
                                            </div>
                                        {% endif %}
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>  
                </div>   
    -->


<div class="modal fade" id="newvendor">
        <div class="modal-dialog modal-xl">
            <div class="modal-content" style="background-color: #213b52;">
                <div class="modal-header">
                    <h3 class="m-3">New Vendor</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
      <div class="modal-body">
        <div class="card p-3 m-3">
            <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalVendor">
                {% csrf_token %}
                {% if user.is_authenticated %}
                    <div class="row">
                        <div class="col-md-3 mt-2">
                            <label for="validationCustom01">Title</label>
                            <select name="title" id="title" class="form-control">
                                <option value="Mr">Mr</option>
                                <option value="Mrs">Mrs</option>
                                <option value="Miss">Miss</option>
                                <option value="Ms">Ms</option>
                            </select>
                        </div>
                        <div class="col-md-3 mt-2">
                            <label for="fname">First name</label>
                            <input type="text" class="form-control" id="fname" name="firstname"
                                   required>
                            <div class="valid-feedback">Looks good!</div>
                        </div>
                        <div class="col-md-3 mt-2">
                            <label for="lname">Last name</label>
                            <input type="text" class="form-control" id="lname" name="lastname">
                        </div>
                        <div class="col-md-3 mt-2">
                            <label for="company">Company</label>
                            <input type="text" class="form-control" id="company" name="company_name">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4 mt-3">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" name="email"
                                placeholder="finsys@mail.com">
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="wsite">Website</label>
                            <input type="text" class="form-control" id="wsite"
                                placeholder="www.finsys.com" name="website">
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="mobile">Mobile</label>
                            <input type="text" class="form-control" id="mobile"
                                placeholder="Mobile number" maxlength="10"
                                name="mobile">
                        </div>
                    </div>
                    <hr>
                    <center><h4><b>Other Options</b></h4></center>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 mt-3">
                            <label for="validationCustom04">GST Treatment</label>
                            <select class="form-control" id="gsttyp" name="gsttype" onchange="showgsttyp()"
                                onclick="hidinput('hello', this)" required>
                                <option selected disabled value="">Choose..</option>
                                <option value="Registered Business - Regular">Registered Business - Regular <span><i>(Business that is registered under gst)</i></span></option>
                                <option value="Registered Business - Composition">Registered Business - Composition (Business that is registered under composition scheme in gst)</option>
                                <option value="unregistered Business">Unregistered Business (Business that has not been registered under gst)</option>
                                <option value="Overseas">Overseas (Import/Export of supply outside india)</option>
                                <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ) (Business that is located in a special economic zone of india or a SEZ developer)</option>
                                <option value="Demed Exports">Demed Exports (Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</option>
                                <option value="Tax Deductor">Tax Deductor (State of central gov,government agencies or local authority)</option>
                                <option value="SEZ Developer">SEZ Developer (A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</option>
                            </select>
                        </div>
                        <div class="col-md-4 mt-3">
                            <div id="hello">
                                <label for="gstin">GSTIN</label>
                                <input type="text" class="form-control" onchange="checkgst(this)"
                                    id="gstin" name="gstin"
                                    placeholder="29APPCK7465F1Z1">
                                <a href="https://services.gst.gov.in/services/searchtp"
                                    target="_blank" style="color:#3dd5f3">Get Taxpayer details ?</a>
                                <div class="text-danger m-2" id="warngst"></div>
                            </div>
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="validationCustom03">PAN NO</label>
                            <input type="text" class="form-control" id="panno" name="panno"
                            placeholder="APPCK7465F">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 mt-2">
                           <label for="">Place of Supply</label>
                            <select class="form-control" id="ssupply" name="sourceofsupply">
                                <option value="Nill"></option>
                                <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                                <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                                <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                                <option value="[AS] Assam">[AS] Assam</option>
                                <option value="[BR] Bihar">[BR] Bihar</option>
                                <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                                <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                                <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                                <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                                <option value="[DL] Delhi">[DL] Delhi</option>
                                <option value="[GA] Goa">[GA] Goa</option>
                                <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                                <option value="[HR] Haryana">[HR] Haryana</option>
                                <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                                <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                                <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                                <option value="[KA] Karnataka">[KA] Karnataka</option>
                                <option value="[KL] Kerala">[KL] Kerala</option>
                                <option value="[LA] Ladakh">[LA] Ladakh</option>
                                <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                                <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                                <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                                <option value="[MN] Manipur">[MN] Manipur</option>
                                <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                                <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                                <option value="[NL] Nagaland">[NL] Nagaland</option>
                                <option value="[OD] Odisha">[OD] Odisha</option>
                                <option value="[PY] Puducherry">[PY] Puducherry</option>
                                <option value="[PB] Punjab">[PB] Punjab</option>
                                <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                                <option value="[SK] Sikkim">[SK] Sikkim</option>
                                <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                                <option value="[TS] Telangana">[TS] Telangana</option>
                                <option value="[TR] Tripura">[TR] Tripura</option>
                                <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                                <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                                <option value="[WB] West Bengal">[WB] West Bengal</option>
                                <option value="[OT] Other Territory">[OT] Other Territory</option>
                            </select>
                        </div>
                        
                        <div class="col-md-3 mt-2">
                            <label for="">Currency</label>
                            <div class="d-flex">
                                <input type="text" class="form-control" id="currency" name="currency" placeholder="INR - Indian Rupee"
                                    id="">
                                <a href="#">
                                    <button type="button" class="btn btn-outline-secondary ml-1">+</button>
                                </a> 
                            </div>   
                        </div>
                        
                        <div class="col-md-3 mt-2">
                           <label for="">Opening Balance</label>
                           <div class="d-flex">
                            <p class="form-control" style="width: 60px;">INR</p>
                            <input type="number" class="form-control" name="openingbalance" placeholder="INR" id="openingbalance">
                           </div>
                        </div>
                        <div class="col-md-3 mt-2">
                            <label for="">Payment Terms</label>
                            <div class="d-flex">
                             <select class="form-control" name="paymentterms" id="paymentterms">
                                 <option selected id="trmopt"></option>
                                 <option value="0">Due on Receipt</option>
                                 <option value="15">NET 15</option>
                                 <option value="30">NET 30</option>
                                 <option value="60">NET 60</option>
                                 {% for pd in cpd %}
                                     <option value="{{ pd.newperiod }}">NET {{ pd.newperiod }}</option>
                                 {% endfor %}
                             </select>
                             <a class="btn btn-outline-secondary ml-1" data-target="#crperiod" data-toggle="modal">+</a>
                         </div> 
                         </div>
                        <div class="row" style="display: none;">
                            <div class="col-md-3 mt-2" >
                                <label for="">Date</label>
                                <input type="date" id="date2" class="form-control" name="date">
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-6 mt-5">
                            <div class="row">
                                <div class="col-md-12 card-title">
                                    <h5 class="mb-0">Billing Address</h5>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mt-3">
                                    <div class="form-row">
                                        <label for="street">Street</label>
                                        <textarea class="form-control street" id="street" name="street"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="city">City</label>
                                        <input type="text" class="form-control" id="city"
                                            name="city"
                                            placeholder="City">
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="state">State</label>
                                        <select type="text" class="form-control" id="state" name="state">
                                            <option value="" selected>Choose</option>
                                            <option value="None Of This">None Of This</option>
                                            <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                            </option>
                                            <option value="Andhra Predhesh">Andhra Predhesh</option>
                                            <option value="Arunachal Predesh">Arunachal Predesh</option>
                                            <option value="Assam">Assam</option>
                                            <option value="Bihar">Bihar</option>
                                            <option value="Chandigarh">Chandigarh</option>
                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                            <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                            <option value="Damn anad Diu">Damn anad Diu</option>
                                            <option value="Delhi">Delhi</option>
                                            <option value="Goa">Goa</option>
                                            <option value="Gujarat">Gujarat</option>
                                            <option value="Haryana">Haryana</option>
                                            <option value="Himachal Predesh">Himachal Predesh</option>
                                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                            <option value="Jharkhand">Jharkhand</option>
                                            <option value="Karnataka">Karnataka</option>
                                            <option value="Kerala">Kerala</option>
                                            <option value="Ladakh">Ladakh</option>
                                            <option value="Lakshadweep">Lakshadweep</option>
                                            <option value="Madhya Predesh">Madhya Predesh</option>
                                            <option value="Maharashtra">Maharashtra</option>
                                            <option value="Manipur">Manipur</option>
                                            <option value="Meghalaya">Meghalaya</option>
                                            <option value="Mizoram">Mizoram</option>
                                            <option value="Nagaland">Nagaland</option>
                                            <option value="Odisha">Odisha</option>
                                            <option value="Puducherry">Puducherry</option>
                                            <option value="Punjab">Punjab</option>
                                            <option value="Rajasthan">Rajasthan</option>
                                            <option value="Sikkim">Sikkim</option>
                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                            <option value="Telangana">Telangana</option>
                                            <option value="Tripura">Tripura</option>
                                            <option value="Uttar Predesh">Uttar Predesh</option>
                                            <option value="Uttarakhand">Uttarakhand</option>
                                            <option value="West Bengal">West Bengal</option>
                                            <option value="Other Territory">Other Territory</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="pinco">Pin Code</label>
                                        <input type="text" class="form-control" id="pincode"
                                            name="pincode" maxlength="6"
                                            placeholder="PIN Code">
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="country">Country</label>
                                        <input type="text" class="form-control" id="country"
                                            name="country"
                                            placeholder="Country">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mt-5">
                            <div class="row">
                                <div class="col-md-12 d-flex">
                                    <h5>Shipping Address</h5>
                                    <input class="ml-4 mt-2 ml-2" type="checkbox" onclick="poppins()" id="okay"
                                           name="okay">
                                    <label class="ml-2 mt-1 ml-2" for="okay">Same As Billing Address</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mt-3">
                                    <div class="form-row">
                                        <label for="shipstreet">Street</label>
                                        <textarea class="form-control" id="shipstreet"
                                            name="shipstreet"
                                            ></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shipcity">City</label>
                                        <input type="text" class="form-control" id="shipcity"
                                            name="shipcity" placeholder="City">
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shipstate">State</label>
                                        <select type="text" class="form-control" id="plosu" name="shipstate">
                                            <option id="shipst" selected>Choose</option>
                                            <option value="None Of This">None Of This</option>
                                            <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                            </option>
                                            <option value="Andhra Predhesh">Andhra Predhesh</option>
                                            <option value="Arunachal Predesh">Arunachal Predesh</option>
                                            <option value="Assam">Assam</option>
                                            <option value="Bihar">Bihar</option>
                                            <option value="Chandigarh">Chandigarh</option>
                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                            <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                            <option value="Damn anad Diu">Damn anad Diu</option>
                                            <option value="Delhi">Delhi</option>
                                            <option value="Goa">Goa</option>
                                            <option value="Gujarat">Gujarat</option>
                                            <option value="Haryana">Haryana</option>
                                            <option value="Himachal Predesh">Himachal Predesh</option>
                                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                            <option value="Jharkhand">Jharkhand</option>
                                            <option value="Karnataka">Karnataka</option>
                                            <option value="Kerala">Kerala</option>
                                            <option value="Ladakh">Ladakh</option>
                                            <option value="Lakshadweep">Lakshadweep</option>
                                            <option value="Madhya Predesh">Madhya Predesh</option>
                                            <option value="Maharashtra">Maharashtra</option>
                                            <option value="Manipur">Manipur</option>
                                            <option value="Meghalaya">Meghalaya</option>
                                            <option value="Mizoram">Mizoram</option>
                                            <option value="Nagaland">Nagaland</option>
                                            <option value="Odisha">Odisha</option>
                                            <option value="Puducherry">Puducherry</option>
                                            <option value="Punjab">Punjab</option>
                                            <option value="Rajasthan">Rajasthan</option>
                                            <option value="Sikkim">Sikkim</option>
                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                            <option value="Telangana">Telangana</option>
                                            <option value="Tripura">Tripura</option>
                                            <option value="Uttar Predesh">Uttar Predesh</option>
                                            <option value="Uttarakhand">Uttarakhand</option>
                                            <option value="West Bengal">West Bengal</option>
                                            <option value="Other Territory">Other Territory</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shippincode">Pin Code</label>
                                        <input type="text" class="form-control" id="shippincode"
                                            name="shippincode"
                                            placeholder="PIN Code">
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shipcountry">Country</label>
                                        <input type="text" class="form-control" id="shipcountry"
                                            name="shipcountry"
                                            placeholder="Country">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                <label>Agree to terms and conditions</label>
                                <div class="invalid-feedback">You must agree before submitting.</div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4"></div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3"
                                    type="submit" data-dismiss="modal" id="vendorSave">
                                Submit form
                            </button>
                        </div>
                        <div class="col-md-4"></div>
                    </div>
                {% endif %}
            </form>
        </div>
    </div>
</div>
</div>  
</div>  

<div class="modal fade" id="crperiod">
    <div class="modal-dialog">
        <div class="modal-content" style="background-color: #213b52;">
            <div class="modal-header">
                <h5 class="m-3">New Credit Period</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card p-3 m-3">
                    <form action="{% url 'credit_period_rbill' %}" method="post" autocomplete="off">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-2 mt-2"></div>
                            <div class="col-md-5 mt-2">
                                <input type="number" name="newperiod" class="form-control">
                            </div>
                            <div class="col-md-2 mt-2">
                                <button class="btn btn-outline-info text-grey mb-3" type="submit">Save</button>
                            </div>
                        </div>
                    </form>  
                </div>
            </div>
        </div>   
    </div>
</div> 
<div class="modal fade" id="newrepeat">
    <div class="modal-dialog">
        <div class="modal-content" style="background-color: #213b52;">
            <div class="modal-header">
                <h5 class="m-3">New Repeat Every</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card p-3 m-3">
                    <form action="{% url 'create_repeatevery' %}" method="post" autocomplete="off" id="modalrepeat">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-2 mt-2"></div>
                            <div class="col-md-5 mt-2">
                                <input type="text" name="repeats" class="form-control" id="repeat_input">
                            </div>
                            <div class="col-md-2 mt-2">
                                <button class="btn btn-outline-info text-grey mb-3" type="submit" id="repeatsave">Save</button>
                            </div>
                        </div>
                    </form>  
                </div>
            </div>
        </div>   
    </div>
</div> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
    // var enteredVName = "";
    $(document).on("click","#vendorSave",function(){
    // var firstNameValue = $("#fname").val();
    // var lastNameValue = $("#lname").val();
    
    // enteredVName = firstNameValue + " " + lastNameValue;
        $.ajax({
    
    
            type : 'POST',
            url:"{% url 'createvendor_rbill' %}",
        
            data:{
                
                title : $("#title").val(),
                firstname : $("#fname").val(),
                lastname : $("#lname").val(),
                company_name : $("#company").val(),
                email : $("#email").val(),
                website :$("#wsite").val(),
                mobile :$("#mobile").val(),
                gsttype :$("#gsttyp").val(),
                gstin :$("#gstin").val(),
                panno : $("#panno").val(),
                sourceofsupply :$("#ssupply").val(),
                currency : $("#currency").val(),
                openingbalance : $("#openingbalance").val(),
                paymentterms : $("#paymentterms").val(),
                street : $("#street").val(),
                city : $("#city").val(),
                state : $("#state").val(),
                pincode : $("#pincode").val(),
                country : $("#country").val(),
                shipstreet : $("#shipstreet").val(),
                shipcity : $("#shipcity").val(),
                shipstate : $("#plosu").val(),
                shippincode : $("#shippincode").val(),
                shipcountry : $("#shipcountry").val(),
                csrfmiddlewaretoken: '{{ csrf_token }}'
                
            },
            
            success: function(response) {
                document.getElementById("modalVendor").reset();
                reloadVendor();
            },
                    
        });
    
        
        
    });

// function reloadVendor() {

// $.ajax({
//     url: "{% url 'vendor_dropdown_rbill' %}",
//     type: "GET",
//     dataType: "json",
//     data: $(this).serialize(),
//     csrfmiddlewaretoken: '{{ csrf_token }}',

//     success: function(data) {
//         var dropdown = $('#vendor');
//         dropdown.empty();
//     dropdown.append(`<option selected>Select Vendor</option>`);
//         $.each(data, function(key, value) {
//             console.log(value)
//             dropdown.append($('<option></option>').attr('value', key).text(value[1] + " " +value[2] + " "+ value[3]).val(value[0] + " " +value[2] + " "+ value[3]));
//         });
//     },
//     error: function(xhr, status, error) {
//     console.error(xhr.responseText);
//     }
// });
// }

function reloadVendor() {

    $.ajax({
        url: "{% url 'vendor_dropdown_rbill' %}",
        type: "GET",
        dataType: "json",
        data: $(this).serialize(),
        csrfmiddlewaretoken: '{{ csrf_token }}',

        success: function(data) {
            var dropdown = $('#vendor');
            dropdown.empty();
            dropdown.append(`<option selected>Select Vendor</option>`);
            $.each(data, function(key, value) {
                
                // dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
                dropdown.append($('<option></option>').attr('value', key).text(value[1] + " " +value[2] + " "+ value[3]).val(value[0] + " " +value[2] + " "+ value[3]));
                
            });
    //         if (enteredVName) {
    //         dropdown.find('option').filter(function() {
    //         return $(this).text() === enteredVName;
    //     }).prop('selected', true);
        
    //   }
//     if (enteredVName) {
//     dropdown.find('option:contains("' + enteredVName + '")').prop('selected', true);
//     // Trigger the change event to load the selected vendor's details
//     dropdown.trigger('change');
// }

    
        },
        error: function(xhr, status, error) {
        console.error(xhr.responseText);
        }
    });

}
$(document).ready(function() {
    $('#vendor').change(function() {
        // var selectedValue = $("#vendor").val();
        // // var values = selectedValue.split(' '); // Split by space
        // var vendorid = values[0];
        // // The rest of the values will be the name (firstname and lastname)
        // var name = values.slice(1).join(' ');

        // Send the vendorid to the server
        $.ajax({
            url: "{% url 'get_vendordet' %}", 
            data: { 
                // id: vendorid,  // Pass the vendorid to the server
                // csrfmiddlewaretoken: '{{ csrf_token }}' 
                id: $('#vendor').val(),
                csrfmiddlewaretoken: '{{ csrf_token }}',
            },
            type : 'POST',
            success: function(data) {
                // Update your UI with the data
                $("#email_row").removeClass('d-none');
                $("#email_row").addClass('d-flex');
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
                $("#gst_trt_row").removeClass('d-none');
                $("#gst_trt_row").addClass('d-flex');
                $('#email_inp').val(" " + data.email);
                $('#gstin_inp').val(" " + data.gstin);
                $('#gst_trt_inp').val(" " + data.gsttype);
            }
        });
    });
});
</script>
    <script>
    
    $(document).on("click","#repeatsave",function(){

        $.ajax({
    
    
            type : 'POST',
            url:"{% url 'create_repeatevery' %}",
        
            data:{
                
                repeats : $("#repeat_input").val(),
             
                csrfmiddlewaretoken: '{{ csrf_token }}'
                
            },
            
            success: function(response) {
                document.getElementById("modalrepeat").reset();
                reloadrepeat();
            },
                    
        });
    
        
        
    });



function reloadrepeat() {

    $.ajax({
        url: "{% url 'repeat_dropdown_rbill' %}",
        type: "GET",
        dataType: "json",
        data: $(this).serialize(),
        csrfmiddlewaretoken: '{{ csrf_token }}',

        success: function(data) {
            var dropdown = $('#repeat');
            dropdown.empty()
            dropdown.append(`<option selected value="1 Week">Week</option>
                                        <option value="2 Weeks">2 Weeks</option>
                                        <option value="1 Month">Month</option>
                                        <option value="2 Months">2 Months</option>
                                        <option value="3 Months">3 Months</option>
                                        <option value="6 Months">6 Months</option>
                                        <option value="1 Year">Years</option>
                                        <option value="2 Years">2 Years</option>
                                        <option value="3 Years">3 Years</option>
                                        <option value="6 Years">6 Years</option>`);
            $.each(data, function(key, value) {
            dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
            
                
            });
 

    
        },
        error: function(xhr, status, error) {
        console.error(xhr.responseText);
        }
    });

}
        $('#date').val(new Date().toJSON().slice(0,10));
        $('#date1').val(new Date().toJSON().slice(0,10));
        $('#date2').val(new Date().toJSON().slice(0,10));
        $('#date3').val(new Date().toJSON().slice(0,10));

        function checkDate() {
            var selectedText = document.getElementById('date1').value;
            var selectedDate = new Date(selectedText);
            var now = new Date();
            if (selectedDate < now) {
                alert("Date must be in the future");
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        function poppins() {
            var chkbtn = document.getElementById('okay');
            if (chkbtn.checked == true) {
                document.getElementById('shipstreet').value = document.getElementById('street').value;
                document.getElementById('shipcity').value = document.getElementById('city').value;
                document.getElementById('shippinco').value = document.getElementById('pinco').value;
                document.getElementById('shipcountry').value = document.getElementById('country').value;
                document.getElementById('shipst').value = document.getElementById('state').value;
                document.getElementById('shipst').innerHTML = document.getElementById('state').value;
            } else {
                document.getElementById('shipstreet').value = '';
                document.getElementById('shipcity').value = '';
                document.getElementById('shipstate').value = '';
                document.getElementById('shippinco').value = '';
                document.getElementById('shipcountry').value = '';
            }
        }
        function poppins1() {
            var chkbtn = document.getElementById('okay1');
            if (chkbtn.checked == true) {
                document.getElementById('shipstreet1').value = document.getElementById('street1').value;
                document.getElementById('shipcity1').value = document.getElementById('city1').value;
                document.getElementById('shippinco1').value = document.getElementById('pinco1').value;
                document.getElementById('shipcountry1').value = document.getElementById('country1').value;
                document.getElementById('shipst1').value = document.getElementById('state1').value;
                document.getElementById('shipst1').innerHTML = document.getElementById('state1').value;
            } else {
                document.getElementById('shipstreet1').value = '';
                document.getElementById('shipcity1').value = '';
                document.getElementById('shipstate1').value = '';
                document.getElementById('shippinco1').value = '';
                document.getElementById('shipcountry1').value = '';
            }
        }
    </script>

    <script>
        function hidinput(divId, element) {
            if (element.value == 'unregistered Business' || element.value == 'Consumer' || element.value == 'Overseas') {
                document.getElementById(divId).style.display = 'none';
            } else {
                document.getElementById(divId).style.display = 'block';
            }
        }

        function hidinput1(divId, element) {
            if (element.value == 'Unregistered Business' || element.value == 'Consumer' || element.value == 'Overseas') {
                document.getElementById(divId).style.display = 'none';
            } else {
                document.getElementById(divId).style.display = 'block';
            }
        }

        function checkgst(element) {
            var gstinput = element.value;
            var gstregexp = "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}";
            if (gstinput.match(gstregexp)) {
                document.getElementById('warngst').innerHTML = '';
            } else {
                document.getElementById('warngst').innerHTML = 'Please provide a valid GSTIN';
                alert('Please provide a valid GSTIN');
            }
        }

        function checkgst1(element) {
            var gstinput1 = element.value;
            var gstregexp1 = "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}";
            if (gstinput1.match(gstregexp1)) {
                document.getElementById('warngst1').innerHTML = '';
            } else {
                document.getElementById('warngst1').innerHTML = 'Please provide a valid GSTIN';
                alert('Please provide a valid GSTIN');
            }
        }

        function checkpan(element) {
            var paninput = element.value;
            var panregexp = ["[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}"]
            if (paninput.match(panregexp)) {
                document.getElementById('warnpan').innerHTML = '';
            } else {
                document.getElementById('warnpan').innerHTML = 'Please provide a valid PAN Number';
                alert('Please provide a valid PAN Number')
            }
        }

        function checkweb(element) {
            var webinput = element.value;
            var webregexp = "www."
            if (webinput.startsWith(webregexp)) {
                document.getElementById('warnweb').innerHTML = '';
            } else {
                document.getElementById('warnweb').innerHTML = 'Please provide a valid Website Address';
                alert('Please provide a valid Website Address')
            }
        }

        function checkphone(element) {
            var phoneinput = element.value;
            var phoneregexp = "[0-9]{10}";
            if (phoneinput.match(phoneregexp)) {
                document.getElementById('warnphone').innerHTML = '';
            } else {
                document.getElementById('warnphone').innerHTML = 'Please provide a valid Phone Number';
                alert('Please provide a valid Phone Number')
            }
        }
    </script>
    <script>
        (function () {
            'use strict';
            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.getElementsByClassName('needs-validation');
                // Loop over them and prevent submission
                var validation = Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
    </script>

    <!-- <script>
        var item_row_counter = 1

        function add_item_row() {
            old_item_row_count = item_row_counter
            item_row_counter++;

            $('#items-table-body >tr:last').clone(true).insertAfter('#items-table-body >tr:last');
            $('#items-table-body >tr:last input').val('');

            $('#items-table-body >tr:last td')[0].innerHTML = item_row_counter
            update_amounts($('#items-table-body input[name=total1]:last'));
        }

        function setup_rows() {
            $("#addrow").click(function(event) {
            event.preventDefault();
            add_item_row();
            });

            for (var i = 0; i <= 4; i++) {
                add_item_row();
            }
        }
    </script> -->
<!-- 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $("#tab_logic").on('click', '.demo', function() {
                var currentRow = $(this).closest("tr");
                var col1=currentRow.find("td:eq(2)").text();
                alert(col1);
            });
        });
    </script>

    <script>
        $(document).ready(function(){
            var roinc = 0
            $('#addrow').click(function(){
                roinc++
                $('#items-table-body').append(
                    `
                        <tr id='addr0${roinc}'>
                            <td>${roinc+1}</td>
                            <td style="width: 20%;">
                                <div class="d-flex">
                                    <select name='items[]' id="product${roinc}" class="form-control">
                                        <option value=" " selected>Select Item</option>
                                        {% for i in item %}
                                            <option value="{{ i.name }}">{{ i.name }}</option>
                                        {% endfor %}
                                    </select>
                                    <a href="#">
                                        <button type="button" class="btn btn-outline-secondary ml-1" data-target="#newitem" data-toggle="modal">+</button>
                                    </a>                    
                                </div>
                            </td>
                            <td>
                                <input type="text" name='hsn[]' id="hsn1${roinc}" placeholder='Enter HSN Code' class="form-control"/>
                            </td>                
                            <td><input type="number" name='quantity[]' onchange="qtychange1(this)" placeholder='Enter Qty' id="qty1" class="form-control qty" step=0 min=0>
                            </td>                
                            <td>
                                <input type="number" name='rate[]' id="unit1${roinc}" placeholder='Enter Rate' class="form-control price" step="0.00" min="0">
                            </td>                                            
                            <td>
                                <select name='tax[]' id="tax${roinc+1}" class="form-control tax">
                                    <option id="ta1${roinc}" value=0 text={{ cmp1.state }}>Choose</option>
                                    <option value=28 text={{ cmp1.state }}>28.0% GST(28%)</option>
                                    <option value=18 text={{ cmp1.state }}>18.0% GST(18%)</option>
                                    <option value=12 text={{ cmp1.state }}>12.0% GST(12%)</option>
                                    <option value=6 text={{ cmp1.state }}>06.0% GST(06%)</option>
                                    <option value=5 text={{ cmp1.state }}>05.0% GST(05%)</option>
                                    <option value=3 text={{ cmp1.state }}>03.0% GST(03%)</option>
                                    <option value=.25 text={{ cmp1.state }}>0.25% GST(0.25%)</option>
                                    <option value=0 text={{ cmp1.state }}>0.0% GST(0%)</option>
                                    <option value=0 text={{ cmp1.state }}>Exempt GST(0%)</option>
                                    <option value=0 text={{ cmp1.state }}>Out of Scope(0%)</option>
                                    <option id="ta5${roinc}" value=0 text=" ">Choose</option>
                                    <option value=28 text=" ">28.0% IGST(28%)</option>
                                    <option value=18 text=" ">18.0% IGST(18%)</option>
                                    <option value=12 text=" ">12.0% IGST(12%)</option>
                                    <option value=6 text=" ">06.0% IGST(06%)</option>
                                    <option value=5 text=" ">05.0% IGST(05%)</option>
                                    <option value=3 text=" ">03.0% IGST(03%)</option>
                                    <option value=.25 text=" ">0.25% IGST(0.25%)</option>
                                    <option value=0 text=" ">0.0% IGST(0%)</option>
                                    <option value=0 text=" ">Exempt IGST(0%)</option>
                                    <option value=0 text=" ">Out of Scope(0%)</option>
                                </select>
                            </td>
                            <td>
                                <input type="number" name='amount[]' id="total1" placeholder=0 class="form-control total" step="any" readonly>
                            </td>                    
                            <td style="display: none;"><input type="number" step="any" name='taxamount1' id="taxamount1" class="form-control taxamount"></td>
                            <td><button type="button" id="${roinc}" class="btn btn-outline-secondary ml-1 remove_row">-</button></td>
                        </tr>
                                                    
                    `
                );
            });

            $(document).on('click','.remove_row',function(){
                var row_id = $(this).attr("id");
                $('#addr0'+row_id+'').remove();
            });

            var place = document.getElementById('plosu').value;
            $(document).on('click','#product',function(){
                select = $('#product').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst
                        document.getElementById('hsn1').value = data
                        document.getElementById('unit1').value = data3
                        if (place == '{{ cmp1.state }}'){
                            document.getElementById('ta1').innerHTML = data4 + ' % GST';
                            document.getElementById('ta1').value=data4
                        } 
                        document.getElementById('ta5').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta5').value=data5
                    }
                });
            });     
                
            $(document).on('click','#product1',function(){
                select = $('#product1').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst
                        document.getElementById('hsn11').value = data
                        document.getElementById('unit11').value = data3
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta11').innerHTML = data4 + ' % GST';
                            document.getElementById('ta11').value=data4
                        }
                        document.getElementById('ta51').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta51').value=data5
                    }
                });
            });

            $(document).on('click','#product2',function(){
                select = $('#product2').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data2 = response.price
                        data3 = response.gst
                        data4 = response.sgst
                        document.getElementById('hsn12').value = data
                        document.getElementById('unit12').value = data2            
                        if (place == '{{ cmp1.state }}')
                            {
                                document.getElementById('ta12').innerHTML = data3 + ' % GST';
                                document.getElementById('ta12').value=data3
                            } 
                            document.getElementById('ta52').innerHTML  = data4 + ' % IGST';
                            document.getElementById('ta52').value=data4
                    }
                });
            });

            $(document).on('click','#product3',function(){
                select = $('#product3').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data2 = response.price
                        data3 = response.gst
                        data4 = response.sgst
                        document.getElementById('hsn13').value = data
                        document.getElementById('unit13').value = data2
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta13').innerHTML = data3 + ' % GST';
                            document.getElementById('ta13').value=data3
                        }          
                        document.getElementById('ta53').innerHTML  = data4 + ' % IGST';
                        document.getElementById('ta53').value=data4
                    }
                });
            });
            
            $(document).on('click','#product4',function(){
                select = $('#product4').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst
                        document.getElementById('hsn14').value = data
                        document.getElementById('unit14').value = data3
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta14').innerHTML = data4 + ' % GST';
                            document.getElementById('ta14').value=data4
                        } 
                        document.getElementById('ta54').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta54').value=data5       
                    }
                });          
            });

            $(document).on('click','#product5',function(){
                select = $('#product5').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst
                        document.getElementById('hsn15').value = data
                        document.getElementById('unit15').value = data3
                        if (place == '{{ cmp1.state }}'){
                            document.getElementById('ta15').innerHTML = data4 + ' % GST';
                            document.getElementById('ta15').value=data4
                        }    
                        document.getElementById('ta55').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta55').value=data5
                    }
                });
            });

            $(document).on('click','#product6',function(){
                select = $('#product6').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst
                        document.getElementById('hsn16').value = data
                        document.getElementById('unit16').value = data3
                        if (place == '{{ cmp1.state }}'){
                            document.getElementById('ta16').innerHTML = data4 + ' % GST';
                            document.getElementById('ta16').value=data4
                        } 
                        document.getElementById('ta56').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta56').value=data5
                    }
                });
            });

            $(document).on('click','#product7',function(){
                select = $('#product7').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn  
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst
                        document.getElementById('hsn17').value = data 
                        document.getElementById('unit17').value = data3
                        if (place == '{{ cmp1.state }}'){
                            document.getElementById('ta17').innerHTML = data4 + ' % GST';
                            document.getElementById('ta17').value=data4
                        } 
                        document.getElementById('ta57').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta57').value=data5
                    }
                });
            });

            $(document).on('click','#product8',function(){
                select = $('#product8').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst        
                        document.getElementById('hsn18').value = data        
                        document.getElementById('unit18').value = data3
                        if (place == '{{ cmp1.state }}'){
                            document.getElementById('ta18').innerHTML = data4 + ' % GST';
                            document.getElementById('ta18').value=data4
                        }         
                        document.getElementById('ta58').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta58').value=data5
                    }
                });
            });

            $(document).on('click','#product9',function(){
                select = $('#product9').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst       
                        document.getElementById('hsn19').value = data   
                        document.getElementById('unit19').value = data3        
                        if (place == '{{ cmp1.state }}'){
                            document.getElementById('ta19').innerHTML = data4 + ' % GST';
                            document.getElementById('ta19').value=data4
                        }         
                        document.getElementById('ta59').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta59').value=data5
                    }
                });
            });

            $(document).on('click','#product10',function(){
                select = $('#product10').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst       
                        document.getElementById('hsn110').value = data
                        document.getElementById('unit110').value = data3        
                        if (place == '{{ cmp1.state }}'){
                            document.getElementById('ta110').innerHTML = data4 + ' % GST';
                            document.getElementById('ta110').value=data4    
                        }         
                        document.getElementById('ta510').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta510').value=data5
                    }
                });
            });

            $(document).on('click','#product11',function(){
                select = $('#product11').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst                      
                        document.getElementById('hsn111').value = data
                        document.getElementById('unit111').value = data3        
                        if (place == '{{ cmp1.state }}'){
                            document.getElementById('ta111').innerHTML = data4 + ' % GST';
                            document.getElementById('ta111').value=data4
                        }         
                        document.getElementById('ta511').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta511').value=data5        
                    }
                });
            });

            $(document).on('click','#product12',function(){
                select = $('#product12').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst
                        document.getElementById('hsn112').value = data
                        document.getElementById('unit112').value = data3
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta112').innerHTML = data4 + ' % GST';
                            document.getElementById('ta112').value=data4
                        } 
                        document.getElementById('ta512').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta512').value=data5
                    }
                });
            });

            $(document).on('click','#product13',function(){
                select = $('#product13').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst       
                        document.getElementById('hsn113').value = data
                        document.getElementById('unit113').value = data3        
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta113').innerHTML = data4 + ' % GST';
                            document.getElementById('ta113').value=data4
                        }        
                        document.getElementById('ta513').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta513').value=data5
                    }
                });
            });

            $(document).on('click','#product14',function(){
                select = $('#product14').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst       
                        document.getElementById('hsn114').value = data
                        document.getElementById('unit114').value = data3        
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta114').innerHTML = data4 + ' % GST';
                            document.getElementById('ta114').value=data4
                        }        
                        document.getElementById('ta514').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta514').value=data5
                    }
                });
            });

            $(document).on('click','#product15',function(){
                select = $('#product15').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst
                        document.getElementById('hsn115').value = data
                        document.getElementById('unit115').value = data3
                        if (place == '{{ cmp1.state }}'){
                            document.getElementById('ta115').innerHTML = data4 + ' % GST';
                            document.getElementById('ta115').value=data4
                        } 
                        document.getElementById('ta515').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta515').value=data5
                    }
                });
            });

            $(document).on('click','#product16',function(){
                select = $('#product16').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst        
                        document.getElementById('hsn116').value = data
                        document.getElementById('unit116').value = data3        
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta116').innerHTML = data4 + ' % GST';
                            document.getElementById('ta116').value=data4
                        }        
                        document.getElementById('ta516').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta516').value=data5
                    }
                });
            });

            $(document).on('click','#product17',function(){
                select = $('#product17').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst
                        document.getElementById('hsn117').value = data
                        document.getElementById('unit117').value = data3
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta117').innerHTML = data4 + ' % GST';
                            document.getElementById('ta117').value=data4

                        } 
                        document.getElementById('ta517').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta517').value=data5
                    }
                });
            });

            $(document).on('click','#product18',function(){
                select = $('#product18').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst        
                        document.getElementById('hsn118').value = data
                        document.getElementById('unit118').value = data3        
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta118').innerHTML = data4 + ' % GST';
                            document.getElementById('ta118').value=data4
                        }         
                        document.getElementById('ta518').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta518').value=data5
                    }
                });
            });

            $(document).on('click','#product19',function(){
                select = $('#product19').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                            console.log(response)
                            data = response.hsn
                            data3 = response.price
                            data4 = response.gst
                            data5 = response.sgst   
                            document.getElementById('hsn119').value = data
                            document.getElementById('unit119').value = data3        
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta119').innerHTML = data4 + ' % GST';
                            document.getElementById('ta119').value=data4
                        }         
                        document.getElementById('ta519').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta519').value=data5
                    }
                });
            });

            $(document).on('click','#product120',function(){
                select = $('#product120').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'itemdata' %}",
                    data: {
                    id: select
                    },
                    success:function(response){
                        console.log(response)
                        data = response.hsn
                        data3 = response.price
                        data4 = response.gst
                        data5 = response.sgst
                        document.getElementById('hsn120').value = data
                        document.getElementById('unit120').value = data3
                        if (place == '{{ cmp1.state }}')
                        {
                            document.getElementById('ta120').innerHTML = data4 + ' % GST';
                            document.getElementById('ta120').value=data4
                        } 
                        document.getElementById('ta520').innerHTML  = data5 + ' % IGST';
                        document.getElementById('ta520').value=data5
                    }
                });
            });
        });
    </script>

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
        function qtychange1(element) {
            var tx = parseInt(element.value);
            document.getElementById('qty11').value = parseInt(document.getElementById('qty111').value) * tx;
            document.getElementById('qty12').value = parseInt(document.getElementById('qty121').value) * tx;
            document.getElementById('qty13').value = parseInt(document.getElementById('qty131').value) * tx;
            document.getElementById('qty14').value = parseInt(document.getElementById('qty141').value) * tx;
        }
        
        function qtychange2(element) {
            var tx = parseInt(element.value);
            document.getElementById('qty21').value = parseInt(document.getElementById('qty211').value) * tx;
            document.getElementById('qty22').value = parseInt(document.getElementById('qty221').value) * tx;
            document.getElementById('qty23').value = parseInt(document.getElementById('qty231').value) * tx;
            document.getElementById('qty24').value = parseInt(document.getElementById('qty241').value) * tx;
        }

        function qtychange3(element) {
            var tx = parseInt(element.value);
            document.getElementById('qty31').value = parseInt(document.getElementById('qty311').value) * tx;
            document.getElementById('qty32').value = parseInt(document.getElementById('qty321').value) * tx;
            document.getElementById('qty33').value = parseInt(document.getElementById('qty331').value) * tx;
            document.getElementById('qty34').value = parseInt(document.getElementById('qty341').value) * tx;
        }

        function qtychange4(element) {
            var tx = parseInt(element.value);
            document.getElementById('qty41').value = parseInt(document.getElementById('qty411').value) * tx;
            document.getElementById('qty42').value = parseInt(document.getElementById('qty421').value) * tx;
            document.getElementById('qty43').value = parseInt(document.getElementById('qty431').value) * tx;
            document.getElementById('qty44').value = parseInt(document.getElementById('qty441').value) * tx;
        }

        $(document).ready(function() {
            $('#select').on('change', function() {
                select = $('#select').val();
                $.ajax({
                type: "GET",
                url: "{% url 'getvendordata' %}",
                data: {
                    id: select
                }
                }).done(function(response) {
                var json_data = JSON.parse(response);
                for (key in json_data) {
                    document.getElementById('billingaddress').value = json_data[key]['street'] + '\n' + json_data[key]['city'] + '\n' + json_data[key]['state'] + '\n' + json_data[key]['pincode'] + '\n' + json_data[key]['country'];
                    
                }
                })
            });

            $('#select1').on('change', function() {
                select1 = $('#select1').val();
                $.ajax({
                    type: "GET",
                    url: "{% url 'getdata2' %}",
                    data: {
                    id: select1
                    }
                }).done(function(response) {
                    var json_data = JSON.parse(response);
                    for (key in json_data) {
                    document.getElementById('deliverto').value = json_data[key]['email'] + '\n' + json_data[key]['mobile'] + '\n' + json_data[key]['street'] + '\n' + json_data[key]['city'] + '\n' + json_data[key]['state'];
                    }
                })
            });

            $('#termadd').on('change', function() {
                select = $('#termadd').val();
                $.ajax({
                        type: "GET",
                        url: "{% url 'getperiod' %}",
                        data: {
                        id: select
                    }
                }).done(function(response) {
                    var json_data = JSON.parse(response);
                    for (key in json_data) {
                    document.getElementById('duedat').value = json_data[key]['newdate'];
                    }
                }).fail(function() { });
            });

            var $select1 = $('#plosu'),
            $select2 = $('#tax1'),
            $select3 = $('#tax2'),
            $select4 = $('#tax3'),
            $select5 = $('#tax4'),
            $options = $select2.find('option'),
            $options1 = $select3.find('option'),
            $options2 = $select4.find('option'),
            $options3 = $select5.find('option');
            if ($options1.value == '{{ cmp1.state }}') {
                $options1.text = "{{ cmp1.state }}"
            }
            $select1.on('change', function() {
                if (this.value == "{{ cmp1.state }}") {
                    $select2.html($options.filter('[text="' + this.value + '"]'));
                    $select3.html($options1.filter('[text="' + this.value + '"]'));
                    $select4.html($options2.filter('[text="' + this.value + '"]'));
                    $select5.html($options3.filter('[text="' + this.value + '"]'));
                } 
                else {
                    $select2.html($options.filter('[text="' + " " + '"]'));
                    $select3.html($options1.filter('[text="' + " " + '"]'));
                    $select4.html($options2.filter('[text="' + " " + '"]'));
                    $select5.html($options3.filter('[text="' + " " + '"]'));
                }
            }).trigger('change');
        });
    </script>

    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script>
        $(document).ready(function() {
            var i = 1;
            $("#add_row").click(function() {
                b = i - 1;
                $('#addr' + i).html($('#addr' + b).html()).find('td:first-child').html(i + 1);
                $('#tab_logic').append('<tr id="addr' + (i + 1) + '"></tr>');
                i++;
            });
            $("#delete_row").click(function() {
                if (i > 1) {
                    $("#addr" + (i - 1)).html('');
                    i--;
                }
                calc();
            });
            $('#tab_logic tbody').on('keyup change', function() {
                calc();
            });
            $('#tax').on('keyup change', function() {
                calc_total();
            });
            $('#tcs').on('keyup change', function () {
                calc_total();
            });
            $('#disc1').on('keyup change', function () {
                calc_total();
            });
        });

        function calc() {
            $('#tab_logic tbody tr').each(function() {
                var html = $(this).html();
                if (html != '') {
                    var qty = $(this).find('.qty').val();
                    var price = $(this).find('.price').val();
                    var tax = $(this).find('.tax').val();
                
                    $(this).find('.total').val(parseFloat(qty * price));
                    $(this).find('.taxamount').val(parseFloat((qty * price) * (parseFloat(tax) / 100)));
                    
                    calc_total();
                }
            });
        }

        function calc_total() {
            total = 0;
            $('.total').each(function() {
                total += parseFloat($(this).val());
            });

            taxamount = 0.0;
            $('.taxamount').each(function() {
                taxamount += parseFloat($(this).val());
            });

            $('#subtotal').val(parseFloat(total.toFixed(2)));
            $('#tax_amount').val(parseFloat(taxamount.toFixed(2)));
            calc_tcs();
        }
        function calc_tcs() {
            tcsamount = 0;
            var a = document.getElementById("tcs1").value
            var discount = document.getElementById("disc1").value
            tcs=0
            tcs =a/100 * total
            let z=Math.round(tcs)
            disc0=discount
            
            var amount =taxamount + total - tcs 
            let x =Math.round(amount)
            let y =Math.round(x-disc0)
            var gt = amount-disc0
            
            $('#tcs_amount').val(parseFloat(tcs.toFixed(2)));
            $('#grandtotal').val(parseFloat(gt.toFixed(2)));
            $('#due').val(parseFloat(y.toFixed(2)));
            $('#round_off').val(parseFloat(y.toFixed(2)));
            // $('#due').val((y).toFixed(2));
            // $('#round_off').val((y).toFixed(2));   

            test()
        }

        function test(){
            var bc = document.getElementById("plosu").value
            d=0
            if (bc == "{{ cmp1.state }}"  ) {
                gst = taxamount/2
                $('#cgst').val(parseFloat(gst.toFixed(2)));
                $('#sgst').val(parseFloat(gst.toFixed(2)));
                $('#igst').val(parseFloat(d.toFixed(2)));
            }
                
            if (bc != "{{ cmp1.state }}"  ) {
                $('#igst').val(taxamount.toFixed(2));
                $('#cgst').val(d.toFixed(2));
                $('#sgst').val(d.toFixed(2));
            }
        }
    </script>

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
        function state(element) {
            if (element.value == "Kerala" ) {
                document.getElementById('cgst1').style.display = 'flex';
                document.getElementById('sgst1').style.display = 'flex';
                document.getElementById('igst1').style.display = 'none'; 
            } else {
                document.getElementById('cgst1').style.display = 'none';
                document.getElementById('sgst1').style.display = 'none';
                document.getElementById('igst1').style.display = 'flex';
            }
        }
    </script>

    <script>
        $(document).ready(function(){
            $(".toggler").click(function(e){
                e.preventDefault();
                $('.cat'+$(this).attr('data-prod-cat')).toggle();
            });
        });
    </script>

    <script src="{% static 'assets/plugins/select2/js/select2.min.js' %}"></script>    
    <script>
        function insertValue() {
            var select = document.getElementById("select"),
            txtVal = document.getElementById("val").value,
            newOption = document.createElement("OPTION"),
            newOptionval = document.createTextNode(txtVal);
            newOption.appendChild(newOptionval);
            select.insertBefore(newOption, select.lastChild);
        }
        
        $('.datepicker').pickadate({
            selectMonths: true,
            selectYears: true
        }),
        $('.timepicker').pickatime()
        
        $(function () {
            $('#date-time').bootstrapMaterialDatePicker({
                format: 'YYYY-MM-DD HH:mm'
            });
            $('#date').bootstrapMaterialDatePicker({
                time: false
            });
            $('#time').bootstrapMaterialDatePicker({
                date: false,
                format: 'HH:mm'
            });
        });
        
        $(document).ready(function () {
            var current_fs, next_fs, previous_fs; //fieldsets
            var opacity;
            $(".next").click(function () {
                current_fs = $(this).parent();
                next_fs = $(this).parent().next();

                $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
                next_fs.show();
                current_fs.animate({opacity: 0}, {
                    step: function (now) {
                        opacity = 1 - now;
                        current_fs.css({
                            'display': 'none',
                            'position': 'relative'
                        });
                        next_fs.css({'opacity': opacity});
                    },
                    duration: 600
                });
            });
            $(".previous").click(function () {
                current_fs = $(this).parent();
                previous_fs = $(this).parent().prev();
                $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");
                previous_fs.show();
                current_fs.animate({opacity: 0}, {
                    step: function (now) {
                        opacity = 1 - now;
                        current_fs.css({
                            'display': 'none',
                            'position': 'relative'
                        });
                        previous_fs.css({'opacity': opacity});
                    },
                    duration: 600
                });
            });

            $('.radio-group .radio').click(function () {
                $(this).parent().find('.radio').removeClass('selected');
                $(this).addClass('selected');
            });
        });
      
        
        function ShowHideDiv(track) {
            var inventorytrack = document.getElementById("inventorytrack");
            inventorytrack.style.display = track.checked ? "flex" : "none";

        } 
    </script> -->
    
{% endblock %}